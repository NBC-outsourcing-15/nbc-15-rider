<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SSE ì•Œë¦¼ í…ŒìŠ¤íŠ¸</title>
</head>
<body>
<h1>ğŸ”” ì‹¤ì‹œê°„ ì•Œë¦¼ í…ŒìŠ¤íŠ¸ (SSE)</h1>
<div id="notification-box">
    <p>ì•Œë¦¼ ëŒ€ê¸° ì¤‘...</p>
</div>

<script>
    const eventSource = new EventSource("http://localhost:8080/api/v1/notification/subscribe");

    const box = document.getElementById("notification-box");

    eventSource.onmessage = function(event) {
        const data = JSON.parse(event.data);
        const msgElement = document.createElement("p");
        msgElement.innerText = `[${data.status}] ${data.message} (ì£¼ë¬¸ë²ˆí˜¸: ${data.orderId})`;
        box.appendChild(msgElement);
    };

    eventSource.onerror = function(event) {
        const err = document.createElement("p");
        err.style.color = 'red';
        err.innerText = 'SSE ì—°ê²° ì‹¤íŒ¨ ë˜ëŠ” ì¢…ë£Œë¨';
        box.appendChild(err);
        eventSource.close();
    };
</script>
</body>
</html>
